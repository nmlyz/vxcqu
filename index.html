<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>ã‚¤ãƒ©ã‚¹ãƒˆä¾é ¼ãƒ†ãƒ³ãƒ—ãƒ¬ä½œæˆ</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>

<h2>ã‚¤ãƒ©ã‚¹ãƒˆä¾é ¼ãƒ†ãƒ³ãƒ—ãƒ¬ä½œæˆ</h2>

<!-- ç¨®é¡ã®é¸æŠ -->
<div id="typeSelector">
  <label class="select-btn">
    <input type="radio" name="type" value="nyanzu" checked>
    ã«ã‚ƒã‚“ãšé‡ç”£ğŸˆâ€â¬›
  </label>
  <label class="select-btn">
    <input type="radio" name="type" value="ganbare">
    ãŒã‚“ã°ã‚Œï¼é‡ç”£
  </label>
</div>

<!-- ãƒ•ã‚©ãƒ¼ãƒ  -->
<form id="formArea" class="form-area"></form>

<!-- ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ -->
<h3>ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼</h3>
<textarea id="templatePreview" readonly></textarea>

<!-- Twitteré€ä¿¡ãƒ»ã‚³ãƒ”ãƒ¼ -->
<div class="action-area">
  <button id="sendButton">Twitterã§é€ä¿¡</button>
  <button id="copyButton">ãƒ†ãƒ³ãƒ—ãƒ¬ã‚’ã‚³ãƒ”ãƒ¼</button>
</div>

<script>
  const formArea = document.getElementById('formArea');
  const preview = document.getElementById('templatePreview');
  const sendButton = document.getElementById('sendButton');
  const copyButton = document.getElementById('copyButton');

  const templates = {
    nyanzu: {
      title: 'ã€ ã«ã‚ƒã‚“ãšé‡ç”£ğŸˆâ€â¬› ã€‘',
      fields: [
        'æ—©æœŸ', 'å·¦å³', 'æ€§åˆ¥', 'é«ªå‹', 'é«ªè‰²', 'ç›®è‰²',
        'æœè‰²', 'å°ç‰©', 'çŒ«è€³ï¼ˆã‚ã‚Š or ãªã—ï¼‰'
      ],
      footer: 'â€»çŒ«è‰²å›ºå®š'
    },
    ganbare: {
      title: 'ã€ ãŒã‚“ã°ã‚Œï¼é‡ç”£ ã€‘',
      fields: [
        'æ—©æœŸ', 'å·¦å³', 'æ€§åˆ¥', 'é«ªå‹', 'é«ªè‰²', 'ç›®è‰²',
        'ä½“æ“æœè‰²', 'ã‚¼ãƒƒã‚±ãƒ³ã®æ–‡å­—', 'å°ç‰©'
      ],
      footer: 'â€»ä½“æ“æœã¨ãƒãƒãƒã‚­ã®è‰²ã¯åŒè‰²ã«ãªã‚Šã¾ã™'
    }
  };

  let currentType = 'nyanzu';

  function createEarlyField() {
  const container = document.createElement('div');
  container.className = 'input-box';
  
  const label = document.createElement('label');
  label.textContent = 'æ—©æœŸ â• ';
  container.appendChild(label);
  
  const radioWrap = document.createElement('div');
  radioWrap.className = 'radio-wrap';
  
  const yesLabel = document.createElement('label');
  yesLabel.innerHTML = `<input type="radio" name="early_toggle" value="ã‚ã‚Š" checked> ã‚ã‚Š`;
  
  const noLabel = document.createElement('label');
  noLabel.innerHTML = `<input type="radio" name="early_toggle" value="ãªã—"> ãªã—`;
  
  radioWrap.appendChild(yesLabel);
  radioWrap.appendChild(noLabel);
  container.appendChild(radioWrap);
  
  // â–¼ é¸æŠè‚¢ï¼ˆã‚ã‚Šã®ä¸‹ã«å‡ºã™ï¼‰
  const select = document.createElement('select');
  select.name = 'æ—©æœŸ';
  ['24h', '3æ—¥', '7æ—¥'].forEach(opt => {
    const o = document.createElement('option');
    o.value = opt;
    o.textContent = opt;
    select.appendChild(o);
  });
  select.className = 'early-options';
  container.appendChild(select);
  
  // åˆæœŸçŠ¶æ…‹
  select.style.display = 'block';
  
  container.querySelectorAll('input[name="early_toggle"]').forEach(radio => {
    radio.addEventListener('change', () => {
      select.style.display = radio.value === 'ã‚ã‚Š' ? 'block' : 'none';
      updatePreview();
    });
  });
  
  return container;
}

  function renderForm() {
    const template = templates[currentType];
    formArea.innerHTML = '';

    template.fields.forEach(field => {
      if (field.startsWith('æ—©æœŸ')) {
        formArea.appendChild(createEarlyField());
        return;
      }
      
      // â–¼ ã“ã® if ã‚’è¿½åŠ ï¼ˆçŒ«è€³ã ã‘é¸æŠå¼ã«ï¼‰
      if (field.includes('çŒ«è€³')) {
        const box = document.createElement('div');
        box.className = 'input-box';
        
        const label = document.createElement('label');
        label.textContent = `${field} â• `;
        box.appendChild(label);
        
        const select = document.createElement('select');
        select.name = field;
        ['ã‚ã‚Š', 'ãªã—'].forEach(opt => {
          const o = document.createElement('option');
          o.value = opt;
          o.textContent = opt;
          select.appendChild(o);
        });
        
        box.appendChild(select);
        formArea.appendChild(box);
        return;
      }

      const box = document.createElement('div');
      box.className = 'input-box';

      const label = document.createElement('label');
      label.textContent = `${field} â• `;

      const input = document.createElement('input');
      input.type = 'text';
      input.name = field;
      input.placeholder = `${field}ã‚’å…¥åŠ›`;

      box.appendChild(label);
      box.appendChild(input);
      formArea.appendChild(box);
    });

    updatePreview();
  }

  function updatePreview() {
    const template = templates[currentType];
    const inputs = formArea.querySelectorAll('input[type="text"], select');
    let result = `${template.title}\n`;

    const earlyToggle = document.querySelector('input[name="early_toggle"]:checked');
    if (earlyToggle) {
      const earlyValue = earlyToggle.value === 'ã‚ã‚Š'
        ? document.querySelector('select[name="æ—©æœŸ"]').value
        : 'ãªã—';
      result += `æ—©æœŸ â• ${earlyValue}\n`;
    }

    inputs.forEach(input => {
      if (input.name !== 'æ—©æœŸ') {
        result += `${input.name} â• ${input.value}\n`;
      }
    });

    result += `\n${template.footer}`;
    preview.value = result;
  }

  document.querySelectorAll('input[name="type"]').forEach(radio => {
    radio.addEventListener('change', (e) => {
      currentType = e.target.value;
      renderForm();
      document.querySelectorAll('.select-btn').forEach(label => {
        label.classList.toggle('selected', label.querySelector('input').checked);
      });
    });
  });

  formArea.addEventListener('input', updatePreview);
  formArea.addEventListener('change', updatePreview);

  sendButton.addEventListener('click', () => {
    const message = encodeURIComponent(preview.value);
    const url = `https://twitter.com/messages/compose?recipient_id=1892974018548080640&text=${message}`;
    window.open(url, '_blank');
  });

  copyButton.addEventListener('click', () => {
    navigator.clipboard.writeText(preview.value);
    copyButton.textContent = 'ã‚³ãƒ”ãƒ¼ã—ã¾ã—ãŸï¼';
    setTimeout(() => (copyButton.textContent = 'ãƒ†ãƒ³ãƒ—ãƒ¬ã‚’ã‚³ãƒ”ãƒ¼'), 1500);
  });

  // åˆæœŸ
  document.querySelectorAll('.select-btn').forEach(label => {
    label.classList.toggle('selected', label.querySelector('input').checked);
  });
  renderForm();
</script>

</body>
</html>