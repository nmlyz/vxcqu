<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>イラスト依頼テンプレ作成</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>

<h2>イラスト依頼テンプレ作成</h2>

<!-- ラジオボタン風の選択ボタン -->
<div id="typeSelector">
  <label class="select-btn">
    <input type="radio" name="type" value="nyanzu" checked>
    にゃんず量産🐈‍⬛
  </label>
  <label class="select-btn">
    <input type="radio" name="type" value="ganbare">
    がんばれ！量産
  </label>
</div>

<!-- 入力欄 -->
<form id="formArea" class="form-area"></form>

<!-- プレビュー -->
<h3>テンプレプレビュー</h3>
<textarea id="templatePreview" readonly></textarea>

<!-- Twitterリンク -->
<button id="sendButton">Twitterで送信</button>

<script>
  const formArea = document.getElementById('formArea');
  const preview = document.getElementById('templatePreview');
  const sendButton = document.getElementById('sendButton');

  const templates = {
    nyanzu: {
      title: '【 にゃんず量産🐈‍⬛ 】',
      fields: [
        '早期', '左右', '性別', '髪型', '髪色', '目色',
        '服色', '小物', '猫耳（あり or なし）'
      ],
      footer: '※猫色固定'
    },
    ganbare: {
      title: '【 がんばれ！量産 】',
      fields: [
        '早期', '左右', '性別', '髪型', '髪色', '目色',
        '体操服色', 'ゼッケンの文字', '小物'
      ],
      footer: '※体操服とハチマキの色は同色になります'
    }
  };

  let currentType = 'nyanzu';

  function renderForm() {
    const template = templates[currentType];
    formArea.innerHTML = '';
    template.fields.forEach(field => {
      const fieldBox = document.createElement('div');
      fieldBox.className = 'input-box';

      const label = document.createElement('label');
      label.textContent = `${field} ╎ `;
      const input = document.createElement('input');
      input.type = 'text';
      input.name = field;
      input.placeholder = `${field}を入力`;

      fieldBox.appendChild(label);
      fieldBox.appendChild(input);
      formArea.appendChild(fieldBox);
    });
    updatePreview();
  }

  function updatePreview() {
    const template = templates[currentType];
    const inputs = formArea.querySelectorAll('input');
    let result = `${template.title}\n`;
    inputs.forEach(input => {
      result += `${input.name} ╎ ${input.value}\n`;
    });
    result += `\n${template.footer}`;
    preview.value = result;
  }

  document.querySelectorAll('input[name="type"]').forEach(radio => {
    radio.addEventListener('change', (e) => {
      currentType = e.target.value;
      renderForm();
      document.querySelectorAll('.select-btn').forEach(label => {
        label.classList.toggle('selected', label.querySelector('input').checked);
      });
    });
  });

  formArea.addEventListener('input', updatePreview);

  sendButton.addEventListener('click', () => {
    const message = encodeURIComponent(preview.value);
    const twitterUrl = `https://twitter.com/messages/compose?recipient_id=1892974018548080640&text=${message}`;
    window.open(twitterUrl, '_blank');
  });

  // 初期化
  document.querySelectorAll('.select-btn').forEach(label => {
    label.classList.toggle('selected', label.querySelector('input').checked);
  });
  renderForm();
</script>

</body>
</html>